# =================================================================
# VS Code Homelab Environment Configuration Template
# =================================================================
#
# SETUP INSTRUCTIONS:
# 1. Copy this file: cp .env.example .env
# 2. Fill in your actual values (search for "your-" and "changeme")
# 3. Never commit .env to git (already in .gitignore)
# 4. Store sensitive values in a password manager
#
# This file configures:
# - Dev containers, Docker Compose, Kubernetes
# - Terraform, Ansible, Proxmox
# - AI assistants, Monitoring, Backups
# =================================================================

# =================================================================
# VS CODE SERVER CONFIGURATION
# =================================================================

# VS Code server password (for web access)
# Generate strong password: openssl rand -base64 32
VSCODE_PASSWORD=changeme

# Sudo password inside container
VSCODE_SUDO_PASSWORD=changeme

# Homelab Path
# Path to your Homelab repository (relative or absolute)
HOMELAB_PATH=../Homelab

# Timezone
TZ=America/New_York

# User/Group IDs (match your local user)
PUID=1000
PGID=1000

# Docker Group ID (for Docker socket access)
# Find with: getent group docker | cut -d: -f3
DOCKER_GID=999

# Kubernetes Configuration
KUBECONFIG=/workspace/.kube/config
K8S_CLUSTER_NAME=homelab-k3s

# Terraform Configuration
TF_DATA_DIR=/workspace/Homelab/infra/terraform/.terraform
TF_PLUGIN_CACHE_DIR=/root/.terraform.d/plugin-cache

# Ansible Configuration
ANSIBLE_CONFIG=/workspace/Homelab/infra/ansible/ansible.cfg
ANSIBLE_VAULT_PASSWORD_FILE=/workspace/.vault_pass

# =================================================================
# TERRAFORM STATE BACKEND (S3/MinIO)
# =================================================================

# AWS/MinIO S3 Configuration (for Terraform state)
# For AWS S3: Use https://s3.amazonaws.com
# For MinIO: Use http://minio.homelab.local:9000
AWS_ENDPOINT_URL=https://minio.homelab.local
AWS_ACCESS_KEY_ID=your-minio-access-key
AWS_SECRET_ACCESS_KEY=your-minio-secret-key
AWS_DEFAULT_REGION=us-east-1

# S3 bucket for Terraform state
TF_STATE_BUCKET=terraform-state

# Force path-style addressing (required for MinIO)
AWS_S3_FORCE_PATH_STYLE=true

# Skip certificate verification (for self-signed certs)
AWS_S3_SKIP_CREDENTIALS_VALIDATION=false

# Proxmox Configuration
PROXMOX_VE_ENDPOINT=https://proxmox.homelab.local:8006/api2/json
PROXMOX_VE_USERNAME=root@pam
PROXMOX_VE_PASSWORD=your-password
# Or use API token
PROXMOX_VE_API_TOKEN_ID=user@realm!tokenid
PROXMOX_VE_API_TOKEN_SECRET=your-token-secret

# AI Assistant API Keys (optional)
OPENAI_API_KEY=sk-...
OPENAI_ORG_ID=org-...
ANTHROPIC_API_KEY=sk-ant-...
GOOGLE_API_KEY=...

# Git Configuration
GIT_AUTHOR_NAME=Your Name
GIT_AUTHOR_EMAIL=your.email@example.com
GIT_COMMITTER_NAME=Your Name
GIT_COMMITTER_EMAIL=your.email@example.com

# Bitwarden CLI (optional)
BW_CLIENTID=...
BW_CLIENTSECRET=...
BW_PASSWORD=...

# Homelab Environment
HOMELAB_ENV=development
HOMELAB_DOMAIN=homelab.local

# Network Configuration
HOMELAB_NETWORK_SUBNET=172.28.0.0/16
HOMELAB_GATEWAY=172.28.0.1
HOMELAB_DNS=172.28.0.1

# Optional: Enable monitoring
COMPOSE_PROFILES=monitoring

# =================================================================
# SSH CONFIGURATION
# =================================================================

# SSH key path for homelab servers
SSH_KEY_PATH=${HOME}/.ssh/homelab_rsa
SSH_USERNAME=homelab
SSH_PORT=22

# =================================================================
# BACKUP CONFIGURATION
# =================================================================

# Restic backup repository
RESTIC_REPOSITORY=/backup/restic
RESTIC_PASSWORD=your-secure-restic-password

# Backup schedule (cron format: minute hour day month weekday)
BACKUP_SCHEDULE="0 2 * * *"

# Backup retention (days)
BACKUP_RETENTION=30

# =================================================================
# MONITORING & OBSERVABILITY
# =================================================================

# Prometheus endpoint
PROMETHEUS_URL=http://prometheus.homelab.local:9090

# Grafana endpoint and API key
GRAFANA_URL=http://grafana.homelab.local:3000
# GRAFANA_API_KEY=your-grafana-api-key

# Loki endpoint (logs aggregation)
# LOKI_URL=http://loki.homelab.local:3100

# =================================================================
# SECRETS MANAGEMENT & VAULT INTEGRATION
# =================================================================

# HashiCorp Vault (optional)
# VAULT_ADDR=https://vault.homelab.local:8200
# VAULT_TOKEN=your-vault-token

# Bitwarden CLI (optional - for secret retrieval)
# Example usage: AWS_ACCESS_KEY=$(bw get password aws-key)
# BW_SESSION=your-bitwarden-session

# =================================================================
# PROXY CONFIGURATION (Corporate/Enterprise)
# =================================================================

# HTTP/HTTPS proxy settings
# HTTP_PROXY=http://proxy.company.com:8080
# HTTPS_PROXY=http://proxy.company.com:8080

# No proxy exceptions (comma-separated)
# NO_PROXY=localhost,127.0.0.1,.homelab.local,192.168.0.0/16

# =================================================================
# PYTHON & NODE.JS
# =================================================================

# Python virtual environment
VIRTUAL_ENV=${HOME}/venv

# Python path (if using custom Python)
# PYTHON_PATH=/usr/local/bin/python3.11

# npm global packages directory
NPM_CONFIG_PREFIX=${HOME}/.npm-global

# Node environment
NODE_ENV=development

# =================================================================
# DOCKER CONFIGURATION
# =================================================================

# Docker BuildKit (faster builds)
DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1

# Docker registry (for private images)
# DOCKER_REGISTRY=registry.homelab.local
# DOCKER_USERNAME=admin
# DOCKER_PASSWORD=your-registry-password

# =================================================================
# SECURITY BEST PRACTICES
# =================================================================
#
# Password Strength:
# - Use at least 32 characters for passwords
# - Generate with: openssl rand -base64 32
# - Store in password manager (Bitwarden, 1Password, etc.)
#
# Rotation Schedule:
# - Rotate secrets monthly in production
# - Rotate immediately if compromised
# - Document rotation in change log
#
# Multi-User Systems:
# - Each user maintains their own .env
# - Use Vault/Bitwarden for shared secrets
# - Never share .env files directly
#
# Vault Integration Example:
#   # Instead of hardcoded values
#   AWS_ACCESS_KEY_ID=$(vault kv get -field=access_key secret/aws)
#   AWS_SECRET_ACCESS_KEY=$(vault kv get -field=secret_key secret/aws)
#
# =================================================================
# TROUBLESHOOTING
# =================================================================
#
# If environment variables aren't loading:
# 1. Check file is named exactly .env (not .env.txt)
# 2. Verify it's in the project root directory
# 3. Restart VS Code / Docker Compose
# 4. Check for syntax errors (no spaces around =)
#
# Testing:
# - Print all env vars: docker-compose config
# - Check specific var: echo $VARIABLE_NAME
# - Validate .env: docker-compose config --quiet
#
# Windows WSL Paths:
# - Use WSL format: /home/user instead of C:\Users\user
# - Convert: wslpath "C:\Users\user\file"
# - Mount: /mnt/c/Users/user (automatic)
#
# =================================================================

